/**
 * @file mavlink_generated_config.h
 * @brief Auto-generated MAVLink device configuration
 *
 * Generated from: h753_full.yaml
 * Platform: STM32
 * Generated: 2025-11-15T14:28:39.589378
 * Checksum: 4a6dd5e625e9a149
 * Generator Version: 1.0.0
 *
 * DO NOT EDIT THIS FILE MANUALLY!
 * Any changes will be overwritten on next generation.
 */

#ifndef MAVLINK_GENERATED_CONFIG_H
#define MAVLINK_GENERATED_CONFIG_H

#ifdef __cplusplus
extern "C" {
#endif

#include <stdint.h>
#include <stdbool.h>

/* Include motor interface for controller access */
#include "motors/motor_interface.h"

/* MAVLink types (included for function prototypes) */
#include "mavlink_types.h"

/* ========================================================================== */
/*  PLATFORM CONFIGURATION                                                    */
/* ========================================================================== */

#define MAVLINK_GEN_PLATFORM_STM32
#define MAVLINK_GEN_MCU_MODEL "STM32H753ZI"
#define MAVLINK_GEN_MCU_CLOCK_MHZ 480
#define MAVLINK_GEN_MCU_VOLTAGE_V 3.300000f
#define MAVLINK_GEN_MCU_FLASH_KB 2048
#define MAVLINK_GEN_MCU_RAM_KB 1024

/* ========================================================================== */
/*  MAVLINK CONFIGURATION                                                     */
/* ========================================================================== */

#define MAVLINK_GEN_SYSTEM_ID 1
#define MAVLINK_GEN_COMPONENT_ID 1
#define MAVLINK_GEN_AUTOPILOT_TYPE 0

/* Transport: UDP */
#define MAVLINK_GEN_TRANSPORT_UDP

#define MAVLINK_GEN_UDP_LOCAL_IP "192.168.11.4"
#define MAVLINK_GEN_UDP_LOCAL_PORT 14550
#define MAVLINK_GEN_UDP_REMOTE_IP "192.168.11.2"
#define MAVLINK_GEN_UDP_REMOTE_PORT 14550


/* ========================================================================== */
/*  DEVICE COUNTS                                                             */
/* ========================================================================== */

#define MAVLINK_GEN_DEVICE_COUNT 9
#define MAVLINK_GEN_SERVO_COUNT 2
#define MAVLINK_GEN_DC_MOTOR_COUNT 2
#define MAVLINK_GEN_BLDC_MOTOR_COUNT 0
#define MAVLINK_GEN_STEPPER_COUNT 0
#define MAVLINK_GEN_ROBOMASTER_COUNT 2
#define MAVLINK_GEN_RS485_MOTOR_COUNT 3
#define MAVLINK_GEN_ENCODER_COUNT 0
#define MAVLINK_GEN_IMU_COUNT 0
#define MAVLINK_GEN_GPS_COUNT 0
#define MAVLINK_GEN_ANALOG_SENSOR_COUNT 0
#define MAVLINK_GEN_DIGITAL_IO_COUNT 0

/* ========================================================================== */
/*  DEVICE DEFINITIONS                                                        */
/* ========================================================================== */

/* Device 1: servo_1 (ID: 1, Type: servo) */
#define MAVLINK_GEN_DEVICE_SERVO_1_ID 1
#define MAVLINK_GEN_DEVICE_SERVO_1_TYPE_SERVO
#define MAVLINK_GEN_DEVICE_SERVO_1_TIMER 15
#define MAVLINK_GEN_DEVICE_SERVO_1_CHANNEL 1

/* Device 2: servo_2 (ID: 2, Type: servo) */
#define MAVLINK_GEN_DEVICE_SERVO_2_ID 2
#define MAVLINK_GEN_DEVICE_SERVO_2_TYPE_SERVO
#define MAVLINK_GEN_DEVICE_SERVO_2_TIMER 15
#define MAVLINK_GEN_DEVICE_SERVO_2_CHANNEL 2

/* Device 3: dc_motor_left (ID: 10, Type: dc_motor) */
#define MAVLINK_GEN_DEVICE_DC_MOTOR_LEFT_ID 10
#define MAVLINK_GEN_DEVICE_DC_MOTOR_LEFT_TYPE_DC_MOTOR
#define MAVLINK_GEN_DEVICE_DC_MOTOR_LEFT_TIMER 3
#define MAVLINK_GEN_DEVICE_DC_MOTOR_LEFT_CHANNEL 1

/* Device 4: dc_motor_right (ID: 11, Type: dc_motor) */
#define MAVLINK_GEN_DEVICE_DC_MOTOR_RIGHT_ID 11
#define MAVLINK_GEN_DEVICE_DC_MOTOR_RIGHT_TYPE_DC_MOTOR
#define MAVLINK_GEN_DEVICE_DC_MOTOR_RIGHT_TIMER 3
#define MAVLINK_GEN_DEVICE_DC_MOTOR_RIGHT_CHANNEL 2

/* Device 5: gimbal_yaw (ID: 20, Type: robomaster) */
#define MAVLINK_GEN_DEVICE_GIMBAL_YAW_ID 20
#define MAVLINK_GEN_DEVICE_GIMBAL_YAW_TYPE_ROBOMASTER
#define MAVLINK_GEN_DEVICE_GIMBAL_YAW_CAN_ID 0x205

/* Device 6: chassis_wheel (ID: 21, Type: robomaster) */
#define MAVLINK_GEN_DEVICE_CHASSIS_WHEEL_ID 21
#define MAVLINK_GEN_DEVICE_CHASSIS_WHEEL_TYPE_ROBOMASTER
#define MAVLINK_GEN_DEVICE_CHASSIS_WHEEL_CAN_ID 0x201

/* Device 7: conveyor_motor_1 (ID: 30, Type: rs485_motor) */
#define MAVLINK_GEN_DEVICE_CONVEYOR_MOTOR_1_ID 30
#define MAVLINK_GEN_DEVICE_CONVEYOR_MOTOR_1_TYPE_RS485_MOTOR

/* Device 8: conveyor_motor_2 (ID: 31, Type: rs485_motor) */
#define MAVLINK_GEN_DEVICE_CONVEYOR_MOTOR_2_ID 31
#define MAVLINK_GEN_DEVICE_CONVEYOR_MOTOR_2_TYPE_RS485_MOTOR

/* Device 9: lift_motor (ID: 32, Type: rs485_motor) */
#define MAVLINK_GEN_DEVICE_LIFT_MOTOR_ID 32
#define MAVLINK_GEN_DEVICE_LIFT_MOTOR_TYPE_RS485_MOTOR


/* ========================================================================== */
/*  SYSTEM CONFIGURATION                                                      */
/* ========================================================================== */

#define MAVLINK_GEN_LOOP_FREQUENCY_HZ 100
#define MAVLINK_GEN_HEARTBEAT_RATE_HZ 1
#define MAVLINK_GEN_WATCHDOG_TIMEOUT_MS 1000
#define MAVLINK_GEN_DEBUG_MODE 1

/* ========================================================================== */
/*  SERVO CONFIGURATION                                                       */
/* ========================================================================== */

typedef struct {
    uint8_t id;
    const char* name;
    uint8_t timer_id;
    uint32_t channel;
    uint16_t min_pulse_us;
    uint16_t max_pulse_us;
    float min_angle;
    float max_angle;
    float neutral_angle;
} mavlink_gen_servo_config_t;

extern const mavlink_gen_servo_config_t mavlink_gen_servo_configs[MAVLINK_GEN_SERVO_COUNT];

/* ========================================================================== */
/*  DC MOTOR CONFIGURATION                                                    */
/* ========================================================================== */

typedef struct {
    uint8_t id;
    const char* name;
    uint8_t timer_id;
    uint32_t channel;
    const char* dir_pin;        /* Direction GPIO pin (e.g., "PA7") for MD10C */
    float max_rpm;
    bool has_encoder;
    uint16_t encoder_ppr;
    bool direction_inverted;
} mavlink_gen_dc_motor_config_t;

extern const mavlink_gen_dc_motor_config_t mavlink_gen_dc_motor_configs[MAVLINK_GEN_DC_MOTOR_COUNT];

/* ========================================================================== */
/*  ROBOMASTER MOTOR CONFIGURATION                                            */
/* ========================================================================== */

typedef enum {
    ROBOMASTER_MOTOR_TYPE_M3508 = 0,
    ROBOMASTER_MOTOR_TYPE_M2006 = 1,
    ROBOMASTER_MOTOR_TYPE_GM6020 = 2,
} robomaster_motor_type_t;

typedef struct {
    uint8_t id;
    const char* name;
    uint16_t can_id;
    robomaster_motor_type_t motor_type;
    float max_rpm;
    float max_current;
} mavlink_gen_robomaster_config_t;

extern const mavlink_gen_robomaster_config_t mavlink_gen_robomaster_configs[MAVLINK_GEN_ROBOMASTER_COUNT];

/* ========================================================================== */
/*  RS485 MOTOR CONFIGURATION                                                 */
/* ========================================================================== */

/* NOTE: rs485_control_mode_t is defined in motors/rs485_controller.h (included via motor_interface.h) */

typedef struct {
    uint8_t id;
    const char* name;
    uint8_t uart_port;
    uint8_t rs485_device_id;
    uint8_t motor_index;        /* Motor index on the board (0-2 for 3 motors) */
    rs485_control_mode_t control_mode;
    float max_rps;
} mavlink_gen_rs485_config_t;

extern const mavlink_gen_rs485_config_t mavlink_gen_rs485_configs[MAVLINK_GEN_RS485_MOTOR_COUNT];

/* ========================================================================== */
/*  SENSOR CONFIGURATION                                                      */
/* ========================================================================== */




/* ========================================================================== */
/*  FUNCTION PROTOTYPES                                                       */
/* ========================================================================== */

/**
 * @brief Initialize all devices from generated configuration
 * @return 0 on success, negative on error
 */
int mavlink_gen_init_all_devices(void);

/**
 * @brief Update all devices (call in main loop)
 * @return 0 on success, negative on error
 */
int mavlink_gen_update_all_devices(void);

/**
 * @brief Emergency stop all devices
 */
void mavlink_gen_emergency_stop_all(void);

/**
 * @brief Get device name by ID
 * @param device_id Device ID
 * @return Device name or NULL if not found
 */
const char* mavlink_gen_get_device_name(uint8_t device_id);

/**
 * @brief Get motor controller by ID (unified access)
 * @param motor_id Motor ID (1-255)
 * @return Pointer to motor controller, or NULL if not found
 */
motor_controller_t* mavlink_gen_get_controller_by_id(uint8_t motor_id);

/**
 * @brief Handle incoming MAVLink message
 * @param msg Received MAVLink message
 * @param chan MAVLink channel
 */
void mavlink_gen_handle_message(const mavlink_message_t* msg, mavlink_channel_t chan);

#ifdef __cplusplus
}
#endif

#endif /* MAVLINK_GENERATED_CONFIG_H */
