/**
 * @file mavlink_unified_devices.h
 * @brief Unified device declarations (auto-generated)
 *
 * This file was automatically generated by MAVLink HAL Code Generator
 * from configuration: {{ config_file }}
 *
 * Generated: {{ generation_timestamp }}
 * Generator Version: {{ generator_version }}
 * Platform: {{ platform.type }}
 * MCU: {{ platform.mcu.model }}
 *
 * DO NOT EDIT THIS FILE MANUALLY
 * Changes will be lost when regenerating from configuration
 */

#ifndef MAVLINK_UNIFIED_DEVICES_H
#define MAVLINK_UNIFIED_DEVICES_H

#ifdef __cplusplus
extern "C" {
#endif

/* ========================================================================== */
/*  INCLUDES                                                                  */
/* ========================================================================== */

#include "../include/mavlink_device_interface.h"
#include "../include/mavlink_device_types.h"
#include "../src/mavlink_device_registry.c"

/* Device-specific headers */
{% for device in devices %}
{% if device.type == 'servo' %}
#include "../devices/servo_device.h"
{% elif device.type in ['dc_motor', 'bldc_motor'] %}
#include "../devices/dc_motor_device.h"
{% elif device.type == 'robomaster' %}
#include "../devices/robomaster_device.h"
{% elif device.type == 'rs485_motor' %}
#include "../devices/rs485_motor_device.h"
{% elif device.type == 'encoder' %}
#include "../devices/encoder_device.h"
{% endif %}
{% endfor %}

/* ========================================================================== */
/*  DEVICE DECLARATIONS                                                       */
/* ========================================================================== */

{% for device in devices %}
/**
 * @brief {{ device.name }} - {{ device.type }}
 * Device ID: {{ device.id }}
 */
extern mavlink_device_t* g_device_{{ device.id }}_{{ device.name | replace('-', '_') | replace(' ', '_') }};
{% endfor %}

/* ========================================================================== */
/*  INITIALIZATION FUNCTIONS                                                  */
/* ========================================================================== */

/**
 * @brief Initialize all unified devices
 *
 * Creates and registers all devices defined in configuration.
 * Must be called before using devices.
 *
 * @return MAVLINK_DEVICE_ERROR_NONE on success, error code otherwise
 */
mavlink_device_error_t unified_devices_init(void);

/**
 * @brief Shutdown all unified devices
 *
 * Shutdowns and frees all devices.
 * Should be called before system shutdown.
 *
 * @return MAVLINK_DEVICE_ERROR_NONE on success, error code otherwise
 */
mavlink_device_error_t unified_devices_shutdown(void);

/**
 * @brief Get device by ID
 *
 * @param device_id Device ID
 * @return Pointer to device, NULL if not found
 */
mavlink_device_t* unified_devices_get(uint8_t device_id);

/**
 * @brief Get device count
 *
 * @return Number of registered devices
 */
uint32_t unified_devices_count(void);

#ifdef __cplusplus
}
#endif

#endif /* MAVLINK_UNIFIED_DEVICES_H */
