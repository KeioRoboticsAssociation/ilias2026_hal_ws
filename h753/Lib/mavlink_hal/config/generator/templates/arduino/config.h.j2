/**
 * @file mavlink_generated_config.h
 * @brief Auto-generated MAVLink device configuration for Arduino
 *
 * Generated from: {{ config_file }}
 * Platform: {{ platform.type | upper }}
 * Generated: {{ generated_timestamp }}
 * Generator Version: {{ generator_version }}
 *
 * DO NOT EDIT THIS FILE MANUALLY!
 * Any changes will be overwritten on next generation.
 */

#ifndef MAVLINK_GENERATED_CONFIG_H
#define MAVLINK_GENERATED_CONFIG_H

#include <Arduino.h>

/* ========================================================================== */
/*  PLATFORM CONFIGURATION                                                    */
/* ========================================================================== */

#define MAVLINK_GEN_PLATFORM_{{ platform.type | upper }}
#define MAVLINK_GEN_MCU_MODEL "{{ platform.mcu.model }}"
#define MAVLINK_GEN_MCU_CLOCK_MHZ {{ platform.mcu.clock_mhz }}

/* ========================================================================== */
/*  MAVLINK CONFIGURATION                                                     */
/* ========================================================================== */

#define MAVLINK_GEN_SYSTEM_ID {{ mavlink.system_id }}
#define MAVLINK_GEN_COMPONENT_ID {{ mavlink.component_id }}
#define MAVLINK_GEN_AUTOPILOT_TYPE {{ mavlink.autopilot_type }}

/* Transport: {{ mavlink.transport.type | upper }} */
#define MAVLINK_GEN_TRANSPORT_{{ mavlink.transport.type | upper }}

{% if mavlink.transport.type == 'uart' %}
#define MAVLINK_GEN_SERIAL_BAUDRATE {{ mavlink.transport.uart.baudrate }}

{% endif %}
/* ========================================================================== */
/*  DEVICE COUNTS                                                             */
/* ========================================================================== */

#define MAVLINK_GEN_DEVICE_COUNT {{ device_count }}
#define MAVLINK_GEN_SERVO_COUNT {{ servo_count }}
#define MAVLINK_GEN_DC_MOTOR_COUNT {{ dc_motor_count }}
#define MAVLINK_GEN_BLDC_MOTOR_COUNT {{ bldc_motor_count }}
#define MAVLINK_GEN_STEPPER_COUNT {{ stepper_count }}

/* ========================================================================== */
/*  SYSTEM CONFIGURATION                                                      */
/* ========================================================================== */

#define MAVLINK_GEN_LOOP_FREQUENCY_HZ {{ system.loop_frequency_hz | default(100) if system else 100 }}
#define MAVLINK_GEN_HEARTBEAT_RATE_HZ {{ system.heartbeat_rate_hz | default(1) if system else 1 }}

/* ========================================================================== */
/*  SERVO CONFIGURATION                                                       */
/* ========================================================================== */

{% if servo_count > 0 %}
struct ServoConfig {
    uint8_t id;
    const char* name;
    uint8_t pin;
    uint16_t min_pulse_us;
    uint16_t max_pulse_us;
    float min_angle;
    float max_angle;
    float neutral_angle;
};

extern const ServoConfig servoConfigs[MAVLINK_GEN_SERVO_COUNT];
{% endif %}

/* ========================================================================== */
/*  DC MOTOR CONFIGURATION                                                    */
/* ========================================================================== */

{% if dc_motor_count > 0 %}
struct DCMotorConfig {
    uint8_t id;
    const char* name;
    uint8_t pwm_pin;
    uint8_t dir_pin1;
    uint8_t dir_pin2;
    float max_rpm;
};

extern const DCMotorConfig dcMotorConfigs[MAVLINK_GEN_DC_MOTOR_COUNT];
{% endif %}

/* ========================================================================== */
/*  BLDC MOTOR CONFIGURATION                                                  */
/* ========================================================================== */

{% if bldc_motor_count > 0 %}
struct BLDCMotorConfig {
    uint8_t id;
    const char* name;
    uint8_t esc_pin;
    uint16_t min_throttle_us;
    uint16_t max_throttle_us;
};

extern const BLDCMotorConfig bldcMotorConfigs[MAVLINK_GEN_BLDC_MOTOR_COUNT];
{% endif %}

/* ========================================================================== */
/*  FUNCTION PROTOTYPES                                                       */
/* ========================================================================== */

/**
 * @brief Initialize all devices from generated configuration
 * @return 0 on success, negative on error
 */
int mavlinkGenInitAllDevices();

/**
 * @brief Update all devices (call in main loop)
 * @return 0 on success, negative on error
 */
int mavlinkGenUpdateAllDevices();

/**
 * @brief Emergency stop all devices
 */
void mavlinkGenEmergencyStopAll();

/**
 * @brief Get device name by ID
 * @param deviceId Device ID
 * @return Device name or NULL if not found
 */
const char* mavlinkGenGetDeviceName(uint8_t deviceId);

#endif /* MAVLINK_GENERATED_CONFIG_H */
